<%- include('partials/header', {title: 'IMS', user: user}) %>
<h1 class="bg-primary text-white text-center mb-0 pb-1">Inventory DashBoard</h1>
<div class="bg-dark text-white text-center py-4 m-0">
  <div class="d-inline">
    <a class="nav-link d-inline text-white" href="/ims/new">Add New Stock</a> |
    <a class="nav-link d-inline text-white" href="/ims/lowstock"
      >Low Stock Report</a
    >
    |
  </div>
  <!-- <input
    type="text"
    class="mt-3"
    placeholder="Search items."
    name="search"
    id="search"
  /> -->
  <form class="mt-3" action="/ims/inventory" method="GET">
    <input
      type="text"
      class="form-control d-inline"
      placeholder="Search items."
      name="search"
      id="search"
      style="width: 200px; display: inline"
    />

    <button
      type="submit"
      name="category"
      value="true"
      class="btn btn-primary ml-2"
    >
      Search by Category
    </button>
    <button
      type="submit"
      name="price"
      value="true"
      class="btn btn-primary ml-2"
    >
      Search by Price
    </button>
    <a href="/ims/inventory">Reset Filter</a>
  </form>
  <form class="mt-3" action="/ims/inventory" method="GET">
    <input
      type="date"
      class="form-control d-inline"
      placeholder="Search items."
      name="search"
      id="search"
      style="width: 200px; display: inline"
    />

    <button type="submit" name="date" value="true" class="btn btn-primary ml-2">
      Search by Date
    </button>
    <a href="/ims/inventory">Reset Filter</a>
  </form>
</div>
<div class="container mt-3">
  <table class="table table-bordered">
    <thead class="table-dark">
      <tr>
        <th>Product Name</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Category</th>
        <th>Date Added</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% for(product of products){ %>

      <tr class="<%= product.quantity < 10 ? 'table-danger' : '' %>">
        <td><%= product.name %></td>
        <td><%= product.price %></td>
        <td><%= product.category %></td>
        <td><%= product.quantity %></td>
        <td><%= product.addedOn.toLocaleString() %></td>
        <td>
          <a
            class="bg-warning text-white py-1 px-3 rounded"
            href="/ims/<%=product._id%>"
            >Edit</a
          >
        </td>
      </tr>
      <% } %>
    </tbody>
  </table>
</div>
<%- include('partials/footer') %>
